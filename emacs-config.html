<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/" lang="en" xml:lang="en">
<head>
<!-- 2024-12-26 Thu 20:15 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ronaldo's Emacs literate configuration</title>
<meta name="author" content="Ronaldo Gligan" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/gligan-org.css" />
<script src="/gligan-fold.js"></script>
</head>
<body>
<div id="preamble" class="status">
<span id="site-name">Ronaldo Gligan</span><span id="home-link"><a href="/">Home</a></span>
</div>
<div id="content" class="content">
<h1 class="title">Ronaldo's Emacs literate configuration</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orge8ac8e4">1. Constants </a></li>
<li><a href="#orgc8bbd5e">2. <code>use-package</code> and MELPA</a></li>
<li><a href="#orgf66f82b">3. Editor preferences (better default behaviour)</a>
<ul>
<li><a href="#orgec81bbe">3.1. Mac OS behaviour</a></li>
</ul>
</li>
<li><a href="#org1043bca">4. Creating a minimal, zen/distraction-free frame</a>
<ul>
<li><a href="#org699f85c">4.1. Ergonomics</a></li>
</ul>
</li>
<li><a href="#org6f07d13">5. Theming and Emacs aesthetics</a>
<ul>
<li><a href="#org390069f">5.1. Blend title bar &amp; frame opacity on MacOS</a></li>
<li><a href="#org6eca59d">5.2. Dark mode based on OS settings and custom toggle</a></li>
<li><a href="#org7df30d9">5.3. Custom fonts</a>
<ul>
<li><a href="#org4bf6039">5.3.1. Font ligatures</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org92b26d4">6. LSP and completion</a>
<ul>
<li><a href="#orge47cfbc">6.1. The <code>eglot</code> LSP client</a></li>
<li><a href="#orga44480c">6.2. Completion with <code>corfu</code></a></li>
</ul>
</li>
<li><a href="#org131d45b">7. Major modes for languages</a>
<ul>
<li><a href="#org8152722">7.1. C</a></li>
<li><a href="#org56dd3dc">7.2. OCaml</a></li>
<li><a href="#org5e89034">7.3. SML</a></li>
<li><a href="#org4962280">7.4. Zig</a></li>
<li><a href="#org450b9c3">7.5. Shell mode</a></li>
<li><a href="#org3c76ba2">7.6. Fish</a></li>
<li><a href="#orgab9f698">7.7. CSS</a></li>
</ul>
</li>
<li><a href="#orged9b808">8. Org mode</a></li>
<li><a href="#orgd2c032c">9. Activating disabled modes</a></li>
<li><a href="#orgb79b914">10. Nicities</a>
<ul>
<li><a href="#orgd312247">10.1. Automatically close and colorise bracket pairs</a></li>
<li><a href="#org6af8c66">10.2. Better <code>M-x</code> completion</a></li>
<li><a href="#org14ace71">10.3. Icons with <code>dired</code> and <code>corfu</code> integration (<code>nerd-icons</code>)</a></li>
<li><a href="#orgc695889">10.4. Show possible key bindings (<code>which-key</code>)</a></li>
<li><a href="#org8152e13">10.5. Fold code (<code>yafolding</code>)</a></li>
<li><a href="#orgb569127">10.6. Flash current line in buffer on buffer change</a></li>
<li><a href="#org0b53f39">10.7. Duplicate lines keeping the column position intact (with <code>C-c d</code>)</a></li>
<li><a href="#orgbc649e2">10.8. Colorise ANSI escape codes in compilation buffer</a></li>
</ul>
</li>
<li><a href="#org226ad98">11. Gligan's custom functionality</a>
<ul>
<li><a href="#org704f55e">11.1. Running a program interactively <code>gligan/run-program</code></a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="org0fd2a57" class="figure">
<p><img src="https://gligan.net/ellas.png" alt="ellas.png" />
</p>
</div>

<div id="outline-container-orge8ac8e4" class="outline-2">
<h2 id="orge8ac8e4"><span class="section-number-2">1.</span> Constants <a id="org1c7e269"></a></h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/light-theme</span> 'ellas<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/dark-theme</span> 'somnus<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/fixed-pitch-font</span> <span style="color: #b45952;">"Iosevka Comfy Motion"</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/variable-pitch-font</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">if</span> <span style="color: #b0b1a3;">(</span>eq system-type 'darwin<span style="color: #b0b1a3;">)</span>
      <span style="color: #b45952;">"Inter"</span>
    <span style="color: #b45952;">"Iosevka Comfy Motion Duo"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/fixed-pitch-font-size</span> 130<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/variable-pitch-font-size</span> 160<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/scratch-buffer-mode</span> 'c-mode<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/org-documents-folder</span> <span style="color: #b45952;">"~/Documents/Org/"</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/org-roam-folder</span>
  <span style="color: #93a8c6;">(</span>concat gligan/org-documents-folder <span style="color: #b45952;">"Notes/"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defconst</span> <span style="color: #074a96;">gligan/c-compiler</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">if</span> <span style="color: #b0b1a3;">(</span>eq system-type 'darwin<span style="color: #b0b1a3;">)</span> <span style="color: #b45952;">"clang"</span> <span style="color: #b45952;">"gcc"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgc8bbd5e" class="outline-2">
<h2 id="orgc8bbd5e"><span class="section-number-2">2.</span> <code>use-package</code> and MELPA</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">require</span> '<span style="color: #c24639;">package</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>add-to-list 'package-archives '<span style="color: #93a8c6;">(</span><span style="color: #b45952;">"melpa"</span> . <span style="color: #b45952;">"https://melpa.org/packages/"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>package-initialize<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgf66f82b" class="outline-2">
<h2 id="orgf66f82b"><span class="section-number-2">3.</span> Editor preferences (better default behaviour)</h2>
<div class="outline-text-2" id="text-3">
<ol class="org-ol">
<li><p>
Use 2 spaces as indentation
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq-default</span> tab-width 2<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq-default</span> indent-tabs-mode nil<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Delete the active region when inserting text
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>delete-selection-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Make word-editing commands work with word components (subwords)
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>global-subword-mode<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Display the column number and buffer size in the modeline
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>column-number-mode 1<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>size-indication-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Enable word wrapping
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq-default</span> word-wrap t<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Different default mode for the scratch buffer
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> initial-major-mode gligan/scratch-buffer-mode<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Don't close Emacs by accident
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> confirm-kill-emacs 'y-or-n-p<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Dates should be formatted as <code>DD/MM/YYYY</code> and weeks start on Monday.
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> calendar-date-style 'european<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> calendar-week-start-day 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Pixel scrolling instead of line scrolling
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>pixel-scroll-precision-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Display trailing whitespace (only in programming modes)
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>add-hook 'prog-mode-hook
          <span style="color: #93a8c6;">(</span><span style="color: #001e86;">lambda</span> <span style="color: #b0b1a3;">()</span>
            <span style="color: #b0b1a3;">(</span><span style="color: #001e86;">setq</span> show-trailing-whitespace t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
</ol>
</div>

<div id="outline-container-orgec81bbe" class="outline-3">
<h3 id="orgec81bbe"><span class="section-number-3">3.1.</span> Mac OS behaviour</h3>
<div class="outline-text-3" id="text-3-1">
<p>
Use modifier keys as if the Mac keyboard were a standard one.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">when</span> <span style="color: #93a8c6;">(</span>eq system-type 'darwin<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> mac-command-modifier       'meta
        mac-option-modifier        'alt
        mac-right-option-modifier  nil
        ns-function-modifier       'hyper
        mac-pass-control-to-system nil<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>


<div id="outline-container-org1043bca" class="outline-2">
<h2 id="org1043bca"><span class="section-number-2">4.</span> Creating a minimal, zen/distraction-free frame</h2>
<div class="outline-text-2" id="text-4">
<ol class="org-ol">
<li><p>
Start all frames maximised
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>add-to-list 'default-frame-alist '<span style="color: #93a8c6;">(</span>fullscreen . maximized<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Minimal window without buttons or scrollbars
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">when</span> <span style="color: #93a8c6;">(</span>not <span style="color: #b0b1a3;">(</span>eq system-type 'darwin<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>menu-bar-mode -1<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>tool-bar-mode -1<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>scroll-bar-mode -1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Prefer short answers ("y or n") instead of "yes or no"
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> use-short-answers t<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Backup files
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> backup-directory-alist
      `<span style="color: #93a8c6;">(</span><span style="color: #b45952;">"."</span> . ,<span style="color: #b0b1a3;">(</span>expand-file-name <span style="color: #b45952;">"backup"</span> user-emacs-directory<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> auto-save-default t
      create-lockfiles nil
      make-backup-files nil<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> kill-buffer-delete-autosave-files t<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Visual hacks
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> frame-resize-pixelwise t<span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> resize-mini-windows 'grow-only<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Use a thin cursor instead of a block
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq-default</span> cursor-type 'bar<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
When using a thin cursor, highlighting the current line is a good
idea so that your eyes don't get lost in the vast sea of code in
all the buffers you have opened.
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> global-hl-line-sticky-flag t<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>global-hl-line-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
No start-up visual noise: disable welcome buffer, and scratch
buffer does not contain a "helpful" elisp comment.
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #6b6757; font-style: italic;">;; </span><span style="color: #898442; font-style: italic;">No welcome message; no scratch buffer message</span>
<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> inhibit-startup-message t
      inhibit-startup-screen t
      initial-scratch-message nil<span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Use the proportional font to display text buffers
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>add-hook 'text-mode-hook #'variable-pitch-mode<span style="color: #8c8c8c;">)</span>
</pre>
</div>
<p>
The problem is that <code>variable-pitch-mode</code> makes <i>all</i> text
proportional, and oftentimes I have block codes. <code>mixed-pitch</code> solves
that:
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">mixed-pitch</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 3
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>text-mode . mixed-pitch-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>

<li><p>
Decluttering dired mode and showing human-readable file sizes
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">dired</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'dired-mode-hook 'dired-hide-details-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> dired-hide-details-hide-symlink-targets nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> dired-listing-switches <span style="color: #b45952;">"-lah"</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
</ol>
</div>

<div id="outline-container-org699f85c" class="outline-3">
<h3 id="org699f85c"><span class="section-number-3">4.1.</span> Ergonomics</h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li><p>
Bind <code>compile</code> and <code>recompile</code> commands to unused key bindings
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"C-c c"</span><span style="color: #93a8c6;">)</span> 'compile<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"C-c x"</span><span style="color: #93a8c6;">)</span> 'recompile<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"C-c C"</span><span style="color: #93a8c6;">)</span>
                <span style="color: #93a8c6;">(</span><span style="color: #001e86;">lambda</span> <span style="color: #b0b1a3;">()</span>
                  <span style="color: #b0b1a3;">(</span><span style="color: #001e86;">interactive</span><span style="color: #b0b1a3;">)</span>
                  <span style="color: #b0b1a3;">(</span>compile <span style="color: #97b098;">(</span>read-string <span style="color: #b45952;">"Interactive compile command: "</span><span style="color: #97b098;">)</span> t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div></li>
</ol>
</div>
</div>
</div>


<div id="outline-container-org6f07d13" class="outline-2">
<h2 id="org6f07d13"><span class="section-number-2">5.</span> Theming and Emacs aesthetics</h2>
<div class="outline-text-2" id="text-5">
<p>
First, declare all external themes as safe (that way, Emacs won't ask
you every time you load a theme wether to consider it safe or not):
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> custom-safe-themes t<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org390069f" class="outline-3">
<h3 id="org390069f"><span class="section-number-3">5.1.</span> Blend title bar &amp; frame opacity on MacOS</h3>
<div class="outline-text-3" id="text-5-1">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">when</span> <span style="color: #93a8c6;">(</span>eq system-type 'darwin<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'default-frame-alist '<span style="color: #b0b1a3;">(</span>ns-transparent-titlebar  . t<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org6eca59d" class="outline-3">
<h3 id="org6eca59d"><span class="section-number-3">5.2.</span> Dark mode based on OS settings and custom toggle</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The function <code>(gligan-toggle-theme)</code> takes care of switching the
system theme.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/toggle-theme</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #b45952;">"Toggle between the system's light and dark modes"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #6b6757; font-style: italic;">;; </span><span style="color: #898442; font-style: italic;">Mac OS</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">when</span> <span style="color: #b0b1a3;">(</span>eq system-type 'darwin<span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>do-applescript
     <span style="color: #b45952;">"tell application \"System Events\"</span>
<span style="color: #b45952;">        tell appearance preferences</span>
<span style="color: #b45952;">          set dark mode to not dark mode</span>
<span style="color: #b45952;">        end tell</span>
<span style="color: #b45952;">      end tell"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"M-g t t"</span><span style="color: #93a8c6;">)</span> 'gligan/toggle-theme<span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
Whereas the <code>auto-dark</code> package worries about keeping the Emacs theme
in sync with the OS.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">auto-dark</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> auto-dark-light-theme gligan/light-theme<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> auto-dark-dark-theme gligan/dark-theme<span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span>auto-dark-mode t<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7df30d9" class="outline-3">
<h3 id="org7df30d9"><span class="section-number-3">5.3.</span> Custom fonts</h3>
<div class="outline-text-3" id="text-5-3">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>set-face-attribute 'default nil
                    <span style="color: #3c2a19; font-weight: bold;">:family</span> gligan/fixed-pitch-font
                    <span style="color: #3c2a19; font-weight: bold;">:height</span> gligan/fixed-pitch-font-size<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>set-face-attribute 'fixed-pitch nil
                    <span style="color: #3c2a19; font-weight: bold;">:family</span> gligan/fixed-pitch-font
                    <span style="color: #3c2a19; font-weight: bold;">:height</span> gligan/fixed-pitch-font-size<span style="color: #8c8c8c;">)</span>
<span style="color: #8c8c8c;">(</span>set-face-attribute 'variable-pitch nil
                    <span style="color: #3c2a19; font-weight: bold;">:family</span> gligan/variable-pitch-font
                    <span style="color: #3c2a19; font-weight: bold;">:height</span> gligan/variable-pitch-font-size<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>

<div id="outline-container-org4bf6039" class="outline-4">
<h4 id="org4bf6039"><span class="section-number-4">5.3.1.</span> Font ligatures</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
With the <a href="#org1c7e269">font I'm using</a>, ot all but most of the ligatures below
work. As far as I know, all Iosevka and Cascadia Code ligatures are
included in this list.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">ligature</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>after-init . global-ligature-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>ligature-set-ligatures
   't
   '<span style="color: #b0b1a3;">(</span><span style="color: #b45952;">"!!"</span> <span style="color: #b45952;">"!!."</span> <span style="color: #b45952;">"!="</span> <span style="color: #b45952;">"!=="</span> <span style="color: #b45952;">"#!"</span> <span style="color: #b45952;">"##"</span> <span style="color: #b45952;">"###"</span> <span style="color: #b45952;">"####"</span> <span style="color: #b45952;">"#("</span> <span style="color: #b45952;">"#:"</span> <span style="color: #b45952;">"#="</span> <span style="color: #b45952;">"#?"</span> <span style="color: #b45952;">"#["</span> <span style="color: #b45952;">"#_"</span> <span style="color: #b45952;">"#_("</span> <span style="color: #b45952;">"#{"</span> <span style="color: #b45952;">"$&gt;"</span> <span style="color: #b45952;">"%%"</span> <span style="color: #b45952;">"&amp;&amp;"</span> <span style="color: #b45952;">"(*"</span> <span style="color: #b45952;">"*)"</span> <span style="color: #b45952;">"**"</span> <span style="color: #b45952;">"***"</span> <span style="color: #b45952;">"*/"</span> <span style="color: #b45952;">"*&gt;"</span> <span style="color: #b45952;">"++"</span> <span style="color: #b45952;">"+++"</span> <span style="color: #b45952;">"+:"</span> <span style="color: #b45952;">"+&gt;"</span> <span style="color: #b45952;">"--"</span> <span style="color: #b45952;">"---"</span> <span style="color: #b45952;">"---&gt;"</span> <span style="color: #b45952;">"--&gt;"</span> <span style="color: #b45952;">"-:"</span> <span style="color: #b45952;">"-&lt;"</span> <span style="color: #b45952;">"-&lt;&lt;"</span> <span style="color: #b45952;">"-&gt;"</span> <span style="color: #b45952;">"-&gt;&gt;"</span> <span style="color: #b45952;">"-|"</span> <span style="color: #b45952;">"-~"</span> <span style="color: #b45952;">".-"</span> <span style="color: #b45952;">".."</span> <span style="color: #b45952;">"..."</span> <span style="color: #b45952;">"..&lt;"</span> <span style="color: #b45952;">".="</span> <span style="color: #b45952;">".?"</span> <span style="color: #b45952;">"/*"</span> <span style="color: #b45952;">"//"</span> <span style="color: #b45952;">"///"</span> <span style="color: #b45952;">"/="</span> <span style="color: #b45952;">"/=="</span> <span style="color: #b45952;">"/&gt;"</span> <span style="color: #b45952;">":+"</span> <span style="color: #b45952;">":-"</span> <span style="color: #b45952;">"://"</span> <span style="color: #b45952;">"::"</span> <span style="color: #b45952;">":::"</span> <span style="color: #b45952;">"::="</span> <span style="color: #b45952;">":&lt;"</span> <span style="color: #b45952;">":="</span> <span style="color: #b45952;">":&gt;"</span> <span style="color: #b45952;">";;"</span> <span style="color: #b45952;">"&lt;!--"</span> <span style="color: #b45952;">"&lt;!---"</span> <span style="color: #b45952;">"&lt;$"</span> <span style="color: #b45952;">"&lt;$&gt;"</span> <span style="color: #b45952;">"&lt;*"</span> <span style="color: #b45952;">"&lt;******&gt;"</span> <span style="color: #b45952;">"&lt;*&gt;"</span> <span style="color: #b45952;">"&lt;+"</span> <span style="color: #b45952;">"&lt;+&gt;"</span> <span style="color: #b45952;">"&lt;-"</span> <span style="color: #b45952;">"&lt;--"</span> <span style="color: #b45952;">"&lt;---"</span> <span style="color: #b45952;">"&lt;----&gt;"</span> <span style="color: #b45952;">"&lt;---&gt;"</span> <span style="color: #b45952;">"&lt;--&gt;"</span> <span style="color: #b45952;">"&lt;-&lt;"</span> <span style="color: #b45952;">"&lt;-&gt;"</span> <span style="color: #b45952;">"&lt;/"</span> <span style="color: #b45952;">"&lt;/&gt;"</span> <span style="color: #b45952;">"&lt;:"</span> <span style="color: #b45952;">"&lt;&lt;"</span> <span style="color: #b45952;">"&lt;&lt;-"</span> <span style="color: #b45952;">"&lt;&lt;&lt;"</span> <span style="color: #b45952;">"&lt;&lt;="</span> <span style="color: #b45952;">"&lt;="</span> <span style="color: #b45952;">"&lt;=&lt;"</span> <span style="color: #b45952;">"&lt;=="</span> <span style="color: #b45952;">"&lt;==="</span> <span style="color: #b45952;">"&lt;====&gt;"</span> <span style="color: #b45952;">"&lt;===&gt;"</span> <span style="color: #b45952;">"&lt;==&gt;"</span> <span style="color: #b45952;">"&lt;=&gt;"</span> <span style="color: #b45952;">"&lt;&gt;"</span> <span style="color: #b45952;">"&lt;|"</span> <span style="color: #b45952;">"&lt;|&gt;"</span> <span style="color: #b45952;">"&lt;||"</span> <span style="color: #b45952;">"&lt;|||"</span> <span style="color: #b45952;">"&lt;~"</span> <span style="color: #b45952;">"&lt;~&gt;"</span> <span style="color: #b45952;">"&lt;~~"</span> <span style="color: #b45952;">"=!="</span> <span style="color: #b45952;">"=/="</span> <span style="color: #b45952;">"=:"</span> <span style="color: #b45952;">"=:="</span> <span style="color: #b45952;">"=&lt;&lt;"</span> <span style="color: #b45952;">"=="</span> <span style="color: #b45952;">"==="</span> <span style="color: #b45952;">"===&gt;"</span> <span style="color: #b45952;">"==&gt;"</span> <span style="color: #b45952;">"=&gt;"</span> <span style="color: #b45952;">"=&gt;&gt;"</span> <span style="color: #b45952;">"&gt;-"</span> <span style="color: #b45952;">"&gt;-&gt;"</span> <span style="color: #b45952;">"&gt;="</span> <span style="color: #b45952;">"&gt;=&gt;"</span> <span style="color: #b45952;">"&gt;&gt;"</span> <span style="color: #b45952;">"&gt;&gt;-"</span> <span style="color: #b45952;">"&gt;&gt;="</span> <span style="color: #b45952;">"&gt;&gt;&gt;"</span> <span style="color: #b45952;">"?."</span> <span style="color: #b45952;">"?:"</span> <span style="color: #b45952;">"?="</span> <span style="color: #b45952;">"??"</span> <span style="color: #b45952;">"[|"</span> <span style="color: #b45952;">"\\\\"</span> <span style="color: #b45952;">"]#"</span> <span style="color: #b45952;">"^="</span> <span style="color: #b45952;">"__"</span> <span style="color: #b45952;">"_|_"</span> <span style="color: #b45952;">"www"</span> <span style="color: #b45952;">"{|"</span> <span style="color: #b45952;">"|-"</span> <span style="color: #b45952;">"|="</span> <span style="color: #b45952;">"|&gt;"</span> <span style="color: #b45952;">"|]"</span> <span style="color: #b45952;">"||"</span> <span style="color: #b45952;">"||="</span> <span style="color: #b45952;">"||&gt;"</span> <span style="color: #b45952;">"|||&gt;"</span> <span style="color: #b45952;">"|}"</span> <span style="color: #b45952;">"~-"</span> <span style="color: #b45952;">"~="</span> <span style="color: #b45952;">"~&gt;"</span> <span style="color: #b45952;">"~@"</span> <span style="color: #b45952;">"~~"</span> <span style="color: #b45952;">"~~&gt;"</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>



<div id="outline-container-org92b26d4" class="outline-2">
<h2 id="org92b26d4"><span class="section-number-2">6.</span> LSP and completion</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orge47cfbc" class="outline-3">
<h3 id="orge47cfbc"><span class="section-number-3">6.1.</span> The <code>eglot</code> LSP client</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Eglot is a minimalistic LSP client for Emacs. For Emacs <code>&gt;= 29</code>, it
comes installed by default. The main alternative to Eglot is <a href="https://emacs-lsp.github.io/lsp-mode/">lsp-mode</a>,
which is more <i>complete</i>: it has more features and more customisations,
but it is slower and it does not come with Emacs.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">eglot</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span>c++-mode
          c-mode
          haskell-mode
          nim-mode
          python-mode
          rust-mode
          tuareg-mode
          zig-mode<span style="color: #b0b1a3;">)</span>
         . eglot-ensure<span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:custom</span>
  <span style="color: #93a8c6;">(</span>eglot-autoshutdown t<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<p>
<a href="https://github.com/joaotavora/eglot#connecting-to-a-server">Here</a> is a list of all the servers that Eglot can communicate to. On
Fedora I had to install the following:
</p>

<ul class="org-ul">
<li><p>
LSP features on C are achieved with <code>clangd</code>.
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #8c8c8c;">(</span>sudo<span style="color: #8c8c8c;">)</span> dnf install clang-tools-extra
</pre>
</div></li>
<li>Haskell has <code>haskell-language-server</code>, that can be installed with
<code>ghcup</code>.</li>
<li><p>
For Nim I use <code>nimlsp</code>:
</p>
<div class="org-src-container">
<pre class="src src-shell">nimble install nimlsp
</pre>
</div></li>
<li><p>
Python has many LSP servers, I use <code>pylsp</code>.
</p>
<div class="org-src-container">
<pre class="src src-shell">pip install python-lsp-server
</pre>
</div></li>
<li>Rust has <code>rust-analyzer</code>.</li>
<li><p>
OCaml needs <code>ocaml-lsp-server</code> and optionally <code>ocamlformat</code>.
</p>
<div class="org-src-container">
<pre class="src src-shell">opam install ocaml-lsp-server ocamlformat
</pre>
</div></li>
<li>I can't build Zig's LSP server because it needs a custom version of
the compiler.</li>
</ul>
</div>
</div>
<div id="outline-container-orga44480c" class="outline-3">
<h3 id="orga44480c"><span class="section-number-3">6.2.</span> Completion with <code>corfu</code></h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">corfu</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:custom</span>
  <span style="color: #93a8c6;">(</span>corfu-cycle t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>corfu-auto nil<span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:init</span>
  <span style="color: #93a8c6;">(</span>global-corfu-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-org131d45b" class="outline-2">
<h2 id="org131d45b"><span class="section-number-2">7.</span> Major modes for languages</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-org8152722" class="outline-3">
<h3 id="org8152722"><span class="section-number-3">7.1.</span> C</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Guess the C style that is being used on every opened buffer:
</p>
</div>
</div>

<div id="outline-container-org56dd3dc" class="outline-3">
<h3 id="org56dd3dc"><span class="section-number-3">7.2.</span> OCaml</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">tuareg</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">dune</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">merlin</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>add-hook 'tuareg-mode-hook #'merlin-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> merlin-error-after-save nil<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">merlin-eldoc</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>tuareg . merlin-eldoc-setup<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-org5e89034" class="outline-3">
<h3 id="org5e89034"><span class="section-number-3">7.3.</span> SML</h3>
<div class="outline-text-3" id="text-7-3">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">sml-mode</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> sml-indent-level 2
        sml-indent-args  2<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org4962280" class="outline-3">
<h3 id="org4962280"><span class="section-number-3">7.4.</span> Zig</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">zig-mode</span>
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> zig-format-on-save nil<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>zig-format-on-save-mode -1<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org450b9c3" class="outline-3">
<h3 id="org450b9c3"><span class="section-number-3">7.5.</span> Shell mode</h3>
<div class="outline-text-3" id="text-7-5">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> sh-basic-offset 2<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3c76ba2" class="outline-3">
<h3 id="org3c76ba2"><span class="section-number-3">7.6.</span> Fish</h3>
<div class="outline-text-3" id="text-7-6">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> fish-indent-offset 2<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgab9f698" class="outline-3">
<h3 id="orgab9f698"><span class="section-number-3">7.7.</span> CSS</h3>
<div class="outline-text-3" id="text-7-7">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">setq</span> css-indent-offset 2<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>




<div id="outline-container-orged9b808" class="outline-2">
<h2 id="orged9b808"><span class="section-number-2">8.</span> Org mode</h2>
<div class="outline-text-2" id="text-8">
<p>
These numbers below define the proportions of the org mode headers in
contrast to the paragraph text.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/org-mode-font-setup</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">dolist</span> <span style="color: #b0b1a3;">(</span>face '<span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>org-document-title . 1.8<span style="color: #aebed8;">)</span>
                  <span style="color: #aebed8;">(</span>org-level-1        . 1.3<span style="color: #aebed8;">)</span>
                  <span style="color: #aebed8;">(</span>org-level-2        . 1.2<span style="color: #aebed8;">)</span>
                  <span style="color: #aebed8;">(</span>org-level-3        . 1.1<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>set-face-attribute <span style="color: #97b098;">(</span>car face<span style="color: #97b098;">)</span> nil
                        <span style="color: #3c2a19; font-weight: bold;">:font</span> gligan/variable-pitch-font
                        <span style="color: #3c2a19; font-weight: bold;">:weight</span> 'regular
                        <span style="color: #3c2a19; font-weight: bold;">:height</span> <span style="color: #97b098;">(</span>cdr face<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">org</span>
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>org-mode . gligan/org-mode-font-setup<span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> org-directory 'gligan/org-documents-folder<span style="color: #93a8c6;">)</span>

  <span style="color: #6b6757; font-style: italic;">;; </span><span style="color: #898442; font-style: italic;">(setq org-hide-emphasis-markers t)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> org-startup-folded 'fold<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> org-startup-indented t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> org-highlight-latex-and-related '<span style="color: #b0b1a3;">(</span>latex<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> org-confirm-babel-evaluate nil<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">org-roam</span>
  <span style="color: #3c2a19; font-weight: bold;">:custom</span>
  <span style="color: #93a8c6;">(</span>org-roam-directory <span style="color: #b0b1a3;">(</span>file-truename gligan/org-roam-folder<span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>org-roam-db-autosync-mode<span style="color: #93a8c6;">)</span>
  <span style="color: #3c2a19; font-weight: bold;">:bind</span> <span style="color: #93a8c6;">(</span><span style="color: #b0b1a3;">(</span><span style="color: #b45952;">"C-c n f"</span> . org-roam-node-find<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #b45952;">"C-c n r"</span> . org-roam-node-random<span style="color: #b0b1a3;">)</span>
         <span style="color: #b0b1a3;">(</span><span style="color: #3c2a19; font-weight: bold;">:map</span> org-mode-map
               <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span><span style="color: #b45952;">"C-c n i"</span> . org-roam-node-insert<span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #b45952;">"C-c n o"</span> . org-id-get-create<span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #b45952;">"C-c n t"</span> . org-roam-tag-add<span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #b45952;">"C-c n a"</span> . org-roam-alias-add<span style="color: #aebed8;">)</span>
                <span style="color: #aebed8;">(</span><span style="color: #b45952;">"C-c n l"</span> . org-roam-buffer-toggle<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">org-modern</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>org-mode . org-modern-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgd2c032c" class="outline-2">
<h2 id="orgd2c032c"><span class="section-number-2">9.</span> Activating disabled modes</h2>
<div class="outline-text-2" id="text-9">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>put 'narrow-to-region 'disabled nil<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-orgb79b914" class="outline-2">
<h2 id="orgb79b914"><span class="section-number-2">10.</span> Nicities</h2>
<div class="outline-text-2" id="text-10">
</div>
<div id="outline-container-orgd312247" class="outline-3">
<h3 id="orgd312247"><span class="section-number-3">10.1.</span> Automatically close and colorise bracket pairs</h3>
<div class="outline-text-3" id="text-10-1">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>electric-pair-mode 1<span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">rainbow-delimiters</span>
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 3
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>prog-mode . rainbow-delimiters-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6af8c66" class="outline-3">
<h3 id="org6af8c66"><span class="section-number-3">10.2.</span> Better <code>M-x</code> completion</h3>
<div class="outline-text-3" id="text-10-2">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">vertico</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> vertico-cycle t<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>vertico-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">savehist</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>savehist-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">orderless</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">setq</span> completion-styles '<span style="color: #b0b1a3;">(</span>orderless flex<span style="color: #b0b1a3;">)</span>
        completion-category-overrides '<span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>eglot <span style="color: #aebed8;">(</span>styles . <span style="color: #b0b0b3;">(</span>orderless flex<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">marginalia</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>marginalia-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org14ace71" class="outline-3">
<h3 id="org14ace71"><span class="section-number-3">10.3.</span> Icons with <code>dired</code> and <code>corfu</code> integration (<code>nerd-icons</code>)</h3>
<div class="outline-text-3" id="text-10-3">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">nerd-icons</span>
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 2
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t<span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">nerd-icons-dired</span>
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 2
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>dired-mode . nerd-icons-dired-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">nerd-icons-corfu</span>
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 2
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:after</span> corfu
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>add-to-list 'corfu-margin-formatters #'nerd-icons-corfu-formatter<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc695889" class="outline-3">
<h3 id="orgc695889"><span class="section-number-3">10.4.</span> Show possible key bindings (<code>which-key</code>)</h3>
<div class="outline-text-3" id="text-10-4">
<p>
<code>which-key</code> implements a menu that appears after a certain amount of
time when a half-pressed keybinding is entered, showing all the
possible <i>routes</i> or functions you can perform from there.
</p>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">which-key</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 2
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span>which-key-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org8152e13" class="outline-3">
<h3 id="org8152e13"><span class="section-number-3">10.5.</span> Fold code (<code>yafolding</code>)</h3>
<div class="outline-text-3" id="text-10-5">
<p>
Being able to fold regions of code is a feature that is quintessential
for any modern source code editor. <code>yafolding</code> figures out the fold
regions through indentation, so it is language agnostic. I do not
customise the key bindings or any other setting &#x2013; they are perfect
right out of the box for me. Below I leave the default key bindings:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><code>C-RET</code></td>
<td class="org-left">Folds the current scope</td>
</tr>

<tr>
<td class="org-left"><code>C-S-RET</code></td>
<td class="org-left">Folds the parent</td>
</tr>

<tr>
<td class="org-left"><code>C-M-RET</code></td>
<td class="org-left">Folds the entire buffer</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">yafolding</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:defer</span> 8
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>prog-mode . yafolding-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb569127" class="outline-3">
<h3 id="orgb569127"><span class="section-number-3">10.6.</span> Flash current line in buffer on buffer change</h3>
<div class="outline-text-3" id="text-10-6">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">pulsar</span>
  <span style="color: #3c2a19; font-weight: bold;">:ensure</span> t
  <span style="color: #3c2a19; font-weight: bold;">:hook</span> <span style="color: #93a8c6;">(</span>after-init-mode . pulsar-global-mode<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org0b53f39" class="outline-3">
<h3 id="org0b53f39"><span class="section-number-3">10.7.</span> Duplicate lines keeping the column position intact (with <code>C-c d</code>)</h3>
<div class="outline-text-3" id="text-10-7">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/dup-line</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>duplicate-line<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>next-line<span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span>backward-word<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"C-c d"</span><span style="color: #93a8c6;">)</span> 'gligan/dup-line<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgbc649e2" class="outline-3">
<h3 id="orgbc649e2"><span class="section-number-3">10.8.</span> Colorise ANSI escape codes in compilation buffer</h3>
<div class="outline-text-3" id="text-10-8">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/colorise-compilation</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">let</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>inhibit-read-only t<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span>ansi-color-apply-on-region compilation-filter-start <span style="color: #97b098;">(</span>point<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span><span style="color: #001e86;">use-package</span> <span style="color: #c24639;">ansi-color</span>
  <span style="color: #3c2a19; font-weight: bold;">:config</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/colorise-compilation</span> <span style="color: #b0b1a3;">()</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #001e86;">let</span> <span style="color: #97b098;">(</span><span style="color: #aebed8;">(</span>inhibit-read-only t<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>ansi-color-apply-on-region
       compilation-filter-start <span style="color: #aebed8;">(</span>point<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span>

  <span style="color: #93a8c6;">(</span>add-hook 'compilation-filter-hook
            #'gligan/colorise-compilation<span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-org226ad98" class="outline-2">
<h2 id="org226ad98"><span class="section-number-2">11.</span> Gligan's custom functionality</h2>
<div class="outline-text-2" id="text-11">
</div>
<div id="outline-container-org704f55e" class="outline-3">
<h3 id="org704f55e"><span class="section-number-3">11.1.</span> Running a program interactively <code>gligan/run-program</code></h3>
<div class="outline-text-3" id="text-11-1">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #001e86;">defun</span> <span style="color: #074a96; font-weight: bold;">gligan/run-program</span> <span style="color: #93a8c6;">()</span>
  <span style="color: #b45952;">"Compiles and runs the program generated by the source code of the</span>
<span style="color: #b45952;">current buffer"</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">interactive</span><span style="color: #93a8c6;">)</span>
  <span style="color: #93a8c6;">(</span><span style="color: #001e86;">let*</span> <span style="color: #b0b1a3;">(</span><span style="color: #97b098;">(</span>ext <span style="color: #aebed8;">(</span>file-name-extension <span style="color: #b0b0b3;">(</span>buffer-name<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>comp
          <span style="color: #aebed8;">(</span><span style="color: #001e86;">cond</span>
           <span style="color: #b0b0b3;">(</span><span style="color: #90a890;">(</span>string= ext <span style="color: #b45952;">"c"</span><span style="color: #90a890;">)</span>
            <span style="color: #90a890;">(</span>cons <span style="color: #a2b6da;">(</span>format <span style="color: #b45952;">"%s %s"</span> gligan/c-compiler <span style="color: #9cb6ad;">(</span>buffer-name<span style="color: #9cb6ad;">)</span><span style="color: #a2b6da;">)</span>
                  <span style="color: #b45952;">"./a.out"</span><span style="color: #90a890;">)</span><span style="color: #b0b0b3;">)</span>
           <span style="color: #b0b0b3;">(</span>t nil<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>comp-cmd <span style="color: #aebed8;">(</span>car comp<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
         <span style="color: #97b098;">(</span>outfile <span style="color: #aebed8;">(</span>cdr comp<span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span>
    <span style="color: #b0b1a3;">(</span><span style="color: #001e86;">if</span> comp
        <span style="color: #97b098;">(</span><span style="color: #001e86;">if</span> <span style="color: #aebed8;">(</span>shell-command comp-cmd<span style="color: #aebed8;">)</span>
            <span style="color: #aebed8;">(</span><span style="color: #001e86;">progn</span>
              <span style="color: #b0b0b3;">(</span>split-window-sensibly<span style="color: #b0b0b3;">)</span>
              <span style="color: #b0b0b3;">(</span>other-window 1<span style="color: #b0b0b3;">)</span>
              <span style="color: #b0b0b3;">(</span>ansi-term outfile<span style="color: #b0b0b3;">)</span><span style="color: #aebed8;">)</span>
          <span style="color: #aebed8;">(</span>message <span style="color: #b45952;">"Compilation failed."</span><span style="color: #aebed8;">)</span><span style="color: #97b098;">)</span>
      <span style="color: #97b098;">(</span>message <span style="color: #b45952;">"Unsupported file extension: %s"</span> ext<span style="color: #97b098;">)</span><span style="color: #b0b1a3;">)</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>

<span style="color: #8c8c8c;">(</span>global-set-key <span style="color: #93a8c6;">(</span>kbd <span style="color: #b45952;">"C-c C-x"</span><span style="color: #93a8c6;">)</span> 'gligan/run-program<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<footer><span class="footer-left"><span class="footer-message">Would you give me the pointer to your heart?</span></span> <span class="footer-right"><span class="footer-copyright">&copy; 2024</span> <span class="footer-author">Ronaldo Gligan</span></span><br><span class="footer-license">All content on this website, unless otherwise stated, is licensed under the terms of the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International license (<code>CC BY 4.0</code>)</a>.</span></footer>
</div>
</body>
</html>
